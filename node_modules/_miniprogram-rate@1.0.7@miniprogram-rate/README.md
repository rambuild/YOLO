# miniprogram-rate

小程序自定义评分组件

>使用此组件需要依赖小程序基础库 2.2.1 以上版本，同时依赖开发者工具的 npm 构建。具体详情可查阅官方 [npm 文档](https://developers.weixin.qq.com/miniprogram/dev/devtools/npm.html)。

## 使用方法

1.安装 rate

```
npm install --save miniprogram-rate
```

2.在需要使用 srate 的页面 page.json 中添加 rate 自定义组件配置

```
{
  "usingComponents": {
    "rate": "miniprogram-rate"
  }
}
```

3.WXML 文件中引用 rate

```
<rate />
```

##示例

**基础示例**


![](./docs/1.jpeg)

**评论的个数，只读模式**

![](./docs/2.jpeg)

```
// wxml
<rate value="{{value}}"  disabled="{{disabled}}" />

// js
  Page({
    data: {
      value: 3,
      disabled: true
    }
  })
```


**评论的star总个数**

![](./docs/3.jpeg)

```
// wxml
  <rate  count="{{count}}"  />

// js
  Page({
    data: {
      count: 10
    }
  })
```

**显示取消(重置)按键**

![](./docs/4.jpeg)

```
// wxml
  <rate  cancel="{{cancel}}"/>

// js
  Page({
    data: {
      cancel: true
    }
  })
```
**取消(重置)按键位置(右边)**

![](./docs/5.jpeg)

```
// wxml
  <rate  cancel="{{cancel}}"  cancelPlace="{{cancelPlace}}"/>

// js
  Page({
    data: {
      cancel: true,
      cancelPlace: 'right'
    }
  })

```

**自定义图标**

![](./docs/6.jpeg)

```
// wxml
  <rate star-on="{{starOn}}"  star-off="{{starOff}}" />

// js
  Page({
    data: {
      starOn: './img/medal-on.png',
      starOff: './img/medal-off.png'
    }
  })
```
>注意,这边图标的路径,需要根据自己当前项目位置决定

**开启自定义一系列图标**

![](./docs/7.jpeg)

```
// wxml
  <rate  faceIcon="{{faceIcon}}"/>

// js
  Page({
    data: {
      faceIcon: true
    }
  })
```
自己有默认5个图标，如果需要自己定义的图标可以faceIconArr这个属性来设置: 如下

![](./docs/8.jpeg)

```
// wxml
  <rate  faceIcon="{{faceIcon}}"  faceIconArr="{{faceIconArr}}"/>

// js
  Page({
    data: {
      faceIcon: true,
      faceIconArr: ['./img/face-a.png', './img/face-b.png', './img/face-c.png',
        './img/face-d.png', './img/coffee.png', './img/cancel-off.png']
    }
  })

```

>注意: 此时的总个数是没数组的大小决定的, 而不是 count.


**change事件**

![](./docs/9.jpeg)

```
// wxml

  <view class="container">
    <rate  bind:change="change"/>
    <view>{{curentScope}} 分</view>
  </view>

// js
  Page({
    data: {
      curentScope: 0,
    },
    change(event) {
      const curentScope = event.detail.index
      this.setData({
        curentScope
      })
    }
  })
```

##API

Rate properties 
<table>
  <tr bgColor="#f7f7f7">
    <td>属性</td>
    <td>说明</td>
    <td>类型</td>
    <td>默认值</td>
  </tr>
  <tr>
    <td>i-class</td>
    <td>自定义 class 类名</td>
    <td>String</td>
    <td style="text-align:center">-</td>
  </tr>
   <tr>
    <td>count</td>
    <td>star 总数</td>
    <td>Number</td>
    <td style="text-align:center">5</td>
  </tr>
  <tr>
    <td>value</td>
    <td>当前 star 数</td>
    <td>Number</td>
    <td style="text-align:center">0</td>
  </tr>
  <tr>
    <td>disabled</td>
    <td>是否只读，无法进行交互</td>
    <td>Boolean</td>
    <td style="text-align:center">false</td>
  </tr>
  <tr>
    <td>size</td>
    <td>图标大小，单位 rpx</td>
    <td>Number</td>
    <td style="text-align:center">32</td>
  </tr>
  <tr>
    <td>cancel</td>
    <td> 显示取消按钮来重置 star 数量 </td>
    <td>Boolean</td>
    <td style="text-align:center">false</td>
  </tr>
  <tr>
    <td>cancelPlace</td>
    <td> 取消按钮的位置（left|right） </td>
    <td>String</td>
    <td style="text-align:center">取消按钮的位置（left</td>
  </tr>
  <tr>
    <td>starOn</td>
    <td> 选中的图标 </td>
    <td>String</td>
    <td style="text-align:center">'./img/star-on.png'</td>
  </tr>
  <tr>
    <td>starOff</td>
    <td> 未选中的图标 </td>
    <td>String</td>
    <td style="text-align:center">'./img/star-off.png'</td>
  </tr>
  <tr>
    <td>faceIcon</td>
    <td> 开启定义表情包 </td>
    <td>Boolean</td>
    <td style="text-align:center">false</td>
  </tr>

   <tr>
    <td>faceIconArr</td>
    <td> 定义表情包数组 </td>
    <td>Array</td>
    <td style="text-align:center">['./img/face-a.png', './img/face-a.png', './img/face-b.png', './img/face-c.png', './img/face-d.png']</td>
  </tr>
  
</table>

Rate events 

<table>
  <tr bgColor="#f7f7f7">
    <td>事件名</td>
    <td>说明</td>
    <td>返回值</td>
  </tr>
  <tr>
    <td>bind:change</td>
    <td>点击评分时触发</td>
    <td>{{index}}</td>
  </tr>
  <tr>
    <td>bind:cancel</td>
    <td>点击重置按钮时触发</td>
    <td>{{index}}</td>
  </tr>
</table>